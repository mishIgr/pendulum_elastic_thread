# Маятник на упругой нити: динамическая система

## Физическая модель

Система описывает движение точечной массы `m`, подвешенной на:
- Упругой нити с коэффициентом жёсткости `k`
- Естественной длиной нити `l`
- Вязким трением с коэффициентом `γ`
- Гравитационным полем `g`

### Уравнения движения

**Векторная форма**:
```math
m\ddot{\mathbf{r}} + \gamma\dot{\mathbf{r}} + k\left(1 - \frac{l}{\|\mathbf{r}\|}\right)\mathbf{r} = m\mathbf{g}
\\
\begin{cases}
m\ddot{x} + \gamma\dot{x} + k\left(1 - \frac{l}{\sqrt{x^2 + y^2}}\right)x = 0 \\
m\ddot{y} + \gamma\dot{y} + k\left(1 - \frac{l}{\sqrt{x^2 + y^2}}\right)y = -mg
\end{cases}
\\
\mathbf{u} = \begin{pmatrix} x \\ y \\ v_x \\ v_y \end{pmatrix}, \quad \frac{d\mathbf{u}}{dt} = \begin{pmatrix} v_x \\ v_y \\ a_x \\ a_y \end{pmatrix}
\\
\begin{cases}
a_x = -\frac{\gamma}{m}v_x - \frac{k}{m}\left(1 - \frac{l}{\sqrt{x^2+y^2}}\right)x \\
a_y = -\frac{\gamma}{m}v_y - \frac{k}{m}\left(1 - \frac{l}{\sqrt{x^2+y^2}}\right)y - g
\end{cases}
```

## Описание написанных модулей
### Описание файла butcher_tables.py

Этот файл содержит таблицы Бутчера для различных методов Рунге-Кутты, которые используются для численного решения обыкновенных дифференциальных уравнений (ОДУ). Таблицы Бутчера определяют коэффициенты, необходимые для реализации конкретных методов.
Содержание файла

Файл содержит четыре таблицы Бутчера:

    Метод Рунге-Кутты 2-го порядка (RK2)

    Метод Рунге-Кутты 3-го порядка (RK3)

    Метод Рунге-Кутты 4-го порядка (RK4)

    Метод Дорманда-Принса 5-го порядка (DOPRI5)

Назначение таблиц Бутчера

Таблицы Бутчера используются для реализации методов Рунге-Кутты. Каждая таблица содержит:

    Матрицу A, которая определяет зависимости между промежуточными шагами.

    Вектор b, который содержит веса для комбинации промежуточных шагов.

    Вектор c, который определяет моменты времени, в которые вычисляются промежуточные шаги.

Эти коэффициенты позволяют достичь заданного порядка точности метода. Например, RK4 является одним из самых популярных методов благодаря балансу между точностью и вычислительной сложностью. DOPRI5 — это более сложный метод с адаптивным шагом, часто используемый в современных библиотеках для решения ОДУ.

Файл butcher_tables.py предоставляет готовые таблицы для использования в численных алгоритмах.

### Описание файла vector.py

Файл vector.py содержит реализацию класса Vector, который расширяет функциональность numpy.ndarray, добавляя возможность работы с именованными измерениями через словарь. Это позволяет обращаться к элементам вектора как по индексам, так и по строковым ключам или атрибутам.

Пример:
```python
v = Vector({'x': 1.5, 'y': 2.0, 'z': 3.5})
```

Методы и функциональность
```
Доступ к элементам:

    По индексу: v[0] (стандартное поведение numpy).

    По ключу: v['x'] или v.x (как атрибут).

Изменение элементов:

    По индексу: v[0] = 10.0.

    По ключу: v['x'] = 10.0 или v.x = 10.0.
```

### Описание файла visual.py

Файл visual.py содержит функцию create_animation, предназначенную для визуализации движения маятника на упругой нити с использованием библиотеки matplotlib. Анимация отображает траекторию движения маятника в реальном времени.

Основные компоненты
```python
create_animation(history, h)
```

Назначение: Создает анимацию движения маятника на основе переданных данных.

Параметры:
```
    history: Список состояний маятника, где каждое состояние содержит координаты x и y.

    h: Шаг времени, используемый для синхронизации анимации с реальным временем моделирования.
```

### Описание файла runge_kutta.py

Файл runge_kutta.py содержит реализацию методов Рунге-Кутты для численного решения систем обыкновенных дифференциальных уравнений (ОДУ). Основная цель — выполнение шагов интегрирования с использованием таблиц Бутчера.

Функция runge_kutta_step

Назначение: Выполняет один шаг интегрирования методом Рунге-Кутты.

Параметры:

    butcher_table: Таблица Бутчера, содержащая коэффициенты A, b и c.

    system_func: Функция, описывающая систему ОДУ (правая часть уравнения).

    dynamic_params: Текущее состояние системы (значения переменных).

    system_params: Параметры системы (константы).

    step: Ш~аг интегрирования.

Функция runge_kutta_n_steps

Назначение: Выполняет заданное количество шагов интегрирования методом Рунге-Кутты.

Параметры:

    table: Таблица Бутчера.

    system_func: Функция системы ОДУ.

    initial_params: Начальное состояние системы.

    system_params: Параметры системы.

    h: Шаг интегрирования.

    steps: Количество шагов.


### Описание файла main.py

Файл main.py является основным скриптом для моделирования и визуализации движения маятника на упругой нити. Он объединяет функциональность из модулей vector.py, butcher_tables.py, runge_kutta.py и visual.py.

Функция pendulum_system_derivatives

Назначение: Вычисляет производные состояния системы (маятник на упругой нити).

Параметры:

    state: Текущее состояние системы (координаты и скорости).

    system_params: Параметры системы (масса, трение, жесткость и др.).

Инициализация системы

Начальное состояние (state):
```python
Vector({
    'x': 1.0,   # Начальная координата X
    'y': 0.0,    # Начальная координата Y
    'vx': 0.0,   # Начальная скорость по X
    'vy': 0.0    # Начальная скорость по Y
})
```

Параметры системы (params):
```python
Vector({
    'm': 0.5,     # Масса маятника
    'gamma': 0.1, # Коэффициент трения
    'k': 1.0,     # Жесткость нити
    'l': 0.1,     # Длина нити
    'g': 9.81     # Ускорение свободного падения
})
```
